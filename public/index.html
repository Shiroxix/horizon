<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horizon Command | Ultra Vision</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@600;700&family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { 
            --primary: #00f2ff; --accent: #bc13fe; --bg: #020408; 
            --card: #0d121d; --text: #f8fafc; --success: #00ff88; --danger: #ff4655;
            --border: rgba(255, 255, 255, 0.1); --glass: rgba(15, 23, 42, 0.8);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: var(--text); overflow-x: hidden; min-height: 100vh; }

        /* EFEITOS VISUAIS DE FUNDO */
        .bg-glow {
            position: fixed; inset: 0; z-index: -1;
            background: 
                radial-gradient(circle at 20% 20%, rgba(188, 19, 254, 0.15), transparent 40%),
                radial-gradient(circle at 80% 80%, rgba(0, 242, 255, 0.15), transparent 40%);
        }

        /* TELA DE LOGIN / REGISTRO */
        #authScreen {
            position: fixed; inset: 0; z-index: 9999; background: var(--bg);
            display: flex; align-items: center; justify-content: center; backdrop-filter: blur(20px);
        }
        .auth-card {
            background: var(--card); border: 1px solid var(--border); padding: 40px;
            border-radius: 30px; width: 100%; max-width: 420px; text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }

        .input-cyber {
            width: 100%; background: rgba(0,0,0,0.3); border: 1px solid var(--border);
            padding: 15px; border-radius: 12px; color: #fff; margin-bottom: 15px;
            font-family: 'Rajdhani'; font-size: 1.1rem; transition: 0.3s;
        }
        .input-cyber:focus { border-color: var(--primary); box-shadow: 0 0 15px rgba(0,242,255,0.2); }

        .btn-main {
            width: 100%; padding: 15px; border-radius: 12px; border: none;
            background: linear-gradient(90deg, var(--accent), var(--primary));
            color: #000; font-weight: 900; cursor: pointer; text-transform: uppercase;
            letter-spacing: 2px; transition: 0.3s;
        }
        .btn-main:hover { transform: scale(1.02); filter: brightness(1.2); }

        /* DASHBOARD PRINCIPAL */
        #mainContent { display: none; padding: 20px; }
        .container { max-width: 1400px; margin: auto; }

        header { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 20px 0 40px; border-bottom: 1px solid var(--border); margin-bottom: 40px;
        }
        .logo { font-family: 'Rajdhani'; font-size: 2rem; font-weight: 700; letter-spacing: 5px; color: #fff; }

        /* USER BADGE & MENU */
        .user-nav { display: flex; align-items: center; gap: 15px; position: relative; }
        .user-info { text-align: right; }
        .user-name { font-weight: 900; font-size: 0.9rem; color: var(--primary); }
        .user-id { font-size: 0.7rem; color: #64748b; cursor: pointer; }
        .user-id:hover { color: #fff; }

        .three-dots { cursor: pointer; padding: 10px; font-size: 1.2rem; transition: 0.3s; }
        .three-dots:hover { color: var(--primary); }

        .popup-menu {
            position: absolute; top: 100%; right: 0; background: var(--card);
            border: 1px solid var(--border); border-radius: 15px; padding: 10px;
            width: 200px; display: none; z-index: 100; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .popup-menu.active { display: block; animation: slideUp 0.3s ease; }
        .menu-item { 
            padding: 12px; border-radius: 10px; cursor: pointer; font-size: 0.8rem;
            display: flex; align-items: center; gap: 10px; transition: 0.3s;
        }
        .menu-item:hover { background: rgba(255,255,255,0.05); color: var(--primary); }

        /* CARDS E GRÁFICOS */
        .grid-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .card-impact {
            background: var(--card); border-radius: 24px; padding: 25px;
            border: 1px solid var(--border); position: relative; overflow: hidden;
        }
        .card-impact::before {
            content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%;
            background: var(--primary);
        }

        /* LISTA DE LOGS ESTILIZADA */
        .log-table { width: 100%; border-collapse: collapse; font-size: 0.75rem; margin-top: 10px; }
        .log-table th { text-align: left; color: #64748b; padding: 10px; border-bottom: 1px solid var(--border); }
        .log-table td { padding: 12px 10px; border-bottom: 1px solid rgba(255,255,255,0.02); }
        .status-dot { height: 8px; width: 8px; border-radius: 50%; display: inline-block; margin-right: 5px; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="bg-glow"></div>

    <div id="authScreen">
        <div class="auth-card" id="loginBox">
            <h1 class="logo" style="margin-bottom: 30px;">HORIZON</h1>
            <div id="authToggle">
                <input type="text" id="userIn" class="input-cyber" placeholder="NOME DE USUÁRIO">
                <input type="password" id="passIn" class="input-cyber" placeholder="SENHA">
                <button class="btn-main" onclick="handleAuth('login')">Acessar Painel</button>
                <p style="margin-top: 20px; font-size: 0.8rem; color: #64748b;">
                    Não tem conta? <a href="#" onclick="toggleAuth(true)" style="color:var(--primary)">Criar agora</a>
                </p>
            </div>
        </div>
    </div>

    <div id="mainContent">
        <div class="container">
            <header>
                <h1 class="logo">HORIZON COMMAND</h1>
                
                <div class="user-nav">
                    <div class="user-info">
                        <div class="user-name" id="displayUsername">USUÁRIO</div>
                        <div class="user-id" onclick="copyID()" title="Clique para copiar">
                            ID: <span id="displayID">------</span> <i class="far fa-copy"></i>
                        </div>
                    </div>
                    <i class="fas fa-ellipsis-v three-dots" onclick="toggleMenu()"></i>
                    
                    <div class="popup-menu" id="perfilMenu">
                        <div class="menu-item" onclick="alert('Abrindo Perfil...')"><i class="fas fa-user-circle"></i> Ver Perfil</div>
                        <div class="menu-item" onclick="toggleAdmPanel()"><i class="fas fa-shield-alt"></i> Painel ADM</div>
                        <div class="menu-item" onclick="logout()" style="color:var(--danger)"><i class="fas fa-sign-out-alt"></i> Sair da Conta</div>
                    </div>
                </div>
            </header>

            <div class="grid-stats">
                <div class="card-impact">
                    <h3 style="font-family:'Rajdhani'; margin-bottom: 20px;">ANÁLISE DE ATIVIDADE</h3>
                    <canvas id="mainChart" height="200"></canvas>
                </div>

                <div class="card-impact" id="admPanel" style="display: block;">
                    <h3 style="font-family:'Rajdhani'; margin-bottom: 20px; color: var(--primary);">SYSTEM LOGS</h3>
                    <div style="max-height: 250px; overflow-y: auto;">
                        <table class="log-table">
                            <thead>
                                <tr>
                                    <th>USUÁRIO</th>
                                    <th>AÇÃO</th>
                                    <th>HORÁRIO</th>
                                </tr>
                            </thead>
                            <tbody id="logTableBody">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // CONFIGURAÇÕES E ESTADO
        const MASTER_ADMIN = "shiro";
        const MASTER_PASS = "18172220";
        let currentUser = null;

        // 1. PERSISTÊNCIA DE LOGIN
        window.onload = () => {
            const savedUser = JSON.parse(localStorage.getItem("hz_user"));
            if(savedUser) {
                showDashboard(savedUser);
            }
            renderLogs();
        };

        function toggleAuth(isRegister) {
            const box = document.getElementById('loginBox');
            if(isRegister) {
                box.innerHTML = `
                    <h1 class="logo" style="margin-bottom: 30px;">REGISTRO</h1>
                    <input type="text" id="regUser" class="input-cyber" placeholder="ESCOLHA UM NOME">
                    <input type="password" id="regPass" class="input-cyber" placeholder="CRIE UMA SENHA">
                    <button class="btn-main" onclick="handleAuth('reg')">Finalizar Cadastro</button>
                    <p style="margin-top: 20px; font-size: 0.8rem; color: #64748b;">
                        Já tem conta? <a href="#" onclick="location.reload()" style="color:var(--primary)">Fazer Login</a>
                    </p>
                `;
            }
        }

        function handleAuth(type) {
            const u = type === 'login' ? document.getElementById('userIn').value : document.getElementById('regUser').value;
            const p = type === 'login' ? document.getElementById('passIn').value : document.getElementById('regPass').value;

            if(!u || !p) return alert("Preencha tudo!");

            let accounts = JSON.parse(localStorage.getItem("hz_accounts")) || {};

            if(type === 'reg') {
                if(accounts[u]) return alert("Usuário já existe!");
                const newID = Math.random().toString(36).substring(2, 8).toUpperCase();
                accounts[u] = { username: u, password: p, id: newID, isAdm: (u.toLowerCase() === MASTER_ADMIN) };
                localStorage.setItem("hz_accounts", JSON.stringify(accounts));
                alert("Conta criada! Agora faça login.");
                location.reload();
            } else {
                // LOGIN ESPECIAL SHIRO OU NORMAL
                if(u.toLowerCase() === MASTER_ADMIN && p === MASTER_PASS) {
                    const adminObj = { username: "Shiro", id: "MASTER-01", isAdm: true };
                    loginProcess(adminObj);
                } else if(accounts[u] && accounts[u].password === p) {
                    loginProcess(accounts[u]);
                } else {
                    alert("Dados inválidos!");
                }
            }
        }

        function loginProcess(userObj) {
            localStorage.setItem("hz_user", JSON.stringify(userObj));
            registrarLog("Login Realizado", userObj.username);
            showDashboard(userObj);
        }

        function showDashboard(user) {
            currentUser = user;
            document.getElementById('authScreen').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('displayUsername').innerText = user.username.toUpperCase();
            document.getElementById('displayID').innerText = user.id;
            
            initChart();
            renderLogs();
        }

        // 2. SISTEMA DE LOGS (CORRIGIDO PARA QUALQUER DISPOSITIVO)
        function registrarLog(acao, usuario) {
            const logs = JSON.parse(localStorage.getItem("hz_logs")) || [];
            logs.unshift({
                usuario,
                acao,
                horario: new Date().toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'})
            });
            localStorage.setItem("hz_logs", JSON.stringify(logs.slice(0, 50))); // Mantém os últimos 50
        }

        function renderLogs() {
            const logs = JSON.parse(localStorage.getItem("hz_logs")) || [];
            const body = document.getElementById('logTableBody');
            if(!body) return;
            
            body.innerHTML = logs.map(l => `
                <tr>
                    <td><b style="color: #fff">${l.usuario}</b></td>
                    <td><span style="color: ${l.acao.includes('Login') ? 'var(--success)' : 'var(--primary)'}">${l.acao}</span></td>
                    <td style="color: #64748b">${l.horario}</td>
                </tr>
            `).join('');
        }

        // 3. IDs COPIÁVEIS
        function copyID() {
            const idText = document.getElementById('displayID').innerText;
            navigator.clipboard.writeText(idText);
            alert("ID Copiado: " + idText);
        }

        // 4. MENU TRÊS PONTINHOS
        function toggleMenu() {
            document.getElementById('perfilMenu').classList.toggle('active');
        }

        function logout() {
            registrarLog("Logout", currentUser.username);
            localStorage.removeItem("hz_user");
            location.reload();
        }

        // VISUAL: GRÁFICO IMPACTANTE
        function initChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
                    datasets: [{
                        label: 'Interações',
                        data: [400, 600, 550, 900, 700, 1200, 1500],
                        borderColor: '#00f2ff',
                        backgroundColor: 'rgba(0, 242, 255, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#64748b' } },
                        x: { grid: { display: false }, ticks: { color: '#64748b' } }
                    }
                }
            });
        }

        // Fecha menu ao clicar fora
        window.onclick = (e) => {
            if (!e.target.matches('.three-dots')) {
                document.getElementById('perfilMenu').classList.remove('active');
            }
        }
    </script>
</body>
</html><!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horizon Command | Ultra Vision</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@600;700&family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { 
            --primary: #00f2ff; --accent: #bc13fe; --bg: #020408; 
            --card: #0d121d; --text: #f8fafc; --success: #00ff88; --danger: #ff4655;
            --border: rgba(255, 255, 255, 0.1); --glass: rgba(15, 23, 42, 0.8);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: var(--text); overflow-x: hidden; min-height: 100vh; }

        /* EFEITOS VISUAIS DE FUNDO */
        .bg-glow {
            position: fixed; inset: 0; z-index: -1;
            background: 
                radial-gradient(circle at 20% 20%, rgba(188, 19, 254, 0.15), transparent 40%),
                radial-gradient(circle at 80% 80%, rgba(0, 242, 255, 0.15), transparent 40%);
        }

        /* TELA DE LOGIN / REGISTRO */
        #authScreen {
            position: fixed; inset: 0; z-index: 9999; background: var(--bg);
            display: flex; align-items: center; justify-content: center; backdrop-filter: blur(20px);
        }
        .auth-card {
            background: var(--card); border: 1px solid var(--border); padding: 40px;
            border-radius: 30px; width: 100%; max-width: 420px; text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }

        .input-cyber {
            width: 100%; background: rgba(0,0,0,0.3); border: 1px solid var(--border);
            padding: 15px; border-radius: 12px; color: #fff; margin-bottom: 15px;
            font-family: 'Rajdhani'; font-size: 1.1rem; transition: 0.3s;
        }
        .input-cyber:focus { border-color: var(--primary); box-shadow: 0 0 15px rgba(0,242,255,0.2); }

        .btn-main {
            width: 100%; padding: 15px; border-radius: 12px; border: none;
            background: linear-gradient(90deg, var(--accent), var(--primary));
            color: #000; font-weight: 900; cursor: pointer; text-transform: uppercase;
            letter-spacing: 2px; transition: 0.3s;
        }
        .btn-main:hover { transform: scale(1.02); filter: brightness(1.2); }

        /* DASHBOARD PRINCIPAL */
        #mainContent { display: none; padding: 20px; }
        .container { max-width: 1400px; margin: auto; }

        header { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 20px 0 40px; border-bottom: 1px solid var(--border); margin-bottom: 40px;
        }
        .logo { font-family: 'Rajdhani'; font-size: 2rem; font-weight: 700; letter-spacing: 5px; color: #fff; }

        /* USER BADGE & MENU */
        .user-nav { display: flex; align-items: center; gap: 15px; position: relative; }
        .user-info { text-align: right; }
        .user-name { font-weight: 900; font-size: 0.9rem; color: var(--primary); }
        .user-id { font-size: 0.7rem; color: #64748b; cursor: pointer; }
        .user-id:hover { color: #fff; }

        .three-dots { cursor: pointer; padding: 10px; font-size: 1.2rem; transition: 0.3s; }
        .three-dots:hover { color: var(--primary); }

        .popup-menu {
            position: absolute; top: 100%; right: 0; background: var(--card);
            border: 1px solid var(--border); border-radius: 15px; padding: 10px;
            width: 200px; display: none; z-index: 100; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .popup-menu.active { display: block; animation: slideUp 0.3s ease; }
        .menu-item { 
            padding: 12px; border-radius: 10px; cursor: pointer; font-size: 0.8rem;
            display: flex; align-items: center; gap: 10px; transition: 0.3s;
        }
        .menu-item:hover { background: rgba(255,255,255,0.05); color: var(--primary); }

        /* CARDS E GRÁFICOS */
        .grid-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .card-impact {
            background: var(--card); border-radius: 24px; padding: 25px;
            border: 1px solid var(--border); position: relative; overflow: hidden;
        }
        .card-impact::before {
            content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%;
            background: var(--primary);
        }

        /* LISTA DE LOGS ESTILIZADA */
        .log-table { width: 100%; border-collapse: collapse; font-size: 0.75rem; margin-top: 10px; }
        .log-table th { text-align: left; color: #64748b; padding: 10px; border-bottom: 1px solid var(--border); }
        .log-table td { padding: 12px 10px; border-bottom: 1px solid rgba(255,255,255,0.02); }
        .status-dot { height: 8px; width: 8px; border-radius: 50%; display: inline-block; margin-right: 5px; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="bg-glow"></div>

    <div id="authScreen">
        <div class="auth-card" id="loginBox">
            <h1 class="logo" style="margin-bottom: 30px;">HORIZON</h1>
            <div id="authToggle">
                <input type="text" id="userIn" class="input-cyber" placeholder="NOME DE USUÁRIO">
                <input type="password" id="passIn" class="input-cyber" placeholder="SENHA">
                <button class="btn-main" onclick="handleAuth('login')">Acessar Painel</button>
                <p style="margin-top: 20px; font-size: 0.8rem; color: #64748b;">
                    Não tem conta? <a href="#" onclick="toggleAuth(true)" style="color:var(--primary)">Criar agora</a>
                </p>
            </div>
        </div>
    </div>

    <div id="mainContent">
        <div class="container">
            <header>
                <h1 class="logo">HORIZON COMMAND</h1>
                
                <div class="user-nav">
                    <div class="user-info">
                        <div class="user-name" id="displayUsername">USUÁRIO</div>
                        <div class="user-id" onclick="copyID()" title="Clique para copiar">
                            ID: <span id="displayID">------</span> <i class="far fa-copy"></i>
                        </div>
                    </div>
                    <i class="fas fa-ellipsis-v three-dots" onclick="toggleMenu()"></i>
                    
                    <div class="popup-menu" id="perfilMenu">
                        <div class="menu-item" onclick="alert('Abrindo Perfil...')"><i class="fas fa-user-circle"></i> Ver Perfil</div>
                        <div class="menu-item" onclick="toggleAdmPanel()"><i class="fas fa-shield-alt"></i> Painel ADM</div>
                        <div class="menu-item" onclick="logout()" style="color:var(--danger)"><i class="fas fa-sign-out-alt"></i> Sair da Conta</div>
                    </div>
                </div>
            </header>

            <div class="grid-stats">
                <div class="card-impact">
                    <h3 style="font-family:'Rajdhani'; margin-bottom: 20px;">ANÁLISE DE ATIVIDADE</h3>
                    <canvas id="mainChart" height="200"></canvas>
                </div>

                <div class="card-impact" id="admPanel" style="display: block;">
                    <h3 style="font-family:'Rajdhani'; margin-bottom: 20px; color: var(--primary);">SYSTEM LOGS</h3>
                    <div style="max-height: 250px; overflow-y: auto;">
                        <table class="log-table">
                            <thead>
                                <tr>
                                    <th>USUÁRIO</th>
                                    <th>AÇÃO</th>
                                    <th>HORÁRIO</th>
                                </tr>
                            </thead>
                            <tbody id="logTableBody">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // CONFIGURAÇÕES E ESTADO
        const MASTER_ADMIN = "shiro";
        const MASTER_PASS = "18172220";
        let currentUser = null;

        // 1. PERSISTÊNCIA DE LOGIN
        window.onload = () => {
            const savedUser = JSON.parse(localStorage.getItem("hz_user"));
            if(savedUser) {
                showDashboard(savedUser);
            }
            renderLogs();
        };

        function toggleAuth(isRegister) {
            const box = document.getElementById('loginBox');
            if(isRegister) {
                box.innerHTML = `
                    <h1 class="logo" style="margin-bottom: 30px;">REGISTRO</h1>
                    <input type="text" id="regUser" class="input-cyber" placeholder="ESCOLHA UM NOME">
                    <input type="password" id="regPass" class="input-cyber" placeholder="CRIE UMA SENHA">
                    <button class="btn-main" onclick="handleAuth('reg')">Finalizar Cadastro</button>
                    <p style="margin-top: 20px; font-size: 0.8rem; color: #64748b;">
                        Já tem conta? <a href="#" onclick="location.reload()" style="color:var(--primary)">Fazer Login</a>
                    </p>
                `;
            }
        }

        function handleAuth(type) {
            const u = type === 'login' ? document.getElementById('userIn').value : document.getElementById('regUser').value;
            const p = type === 'login' ? document.getElementById('passIn').value : document.getElementById('regPass').value;

            if(!u || !p) return alert("Preencha tudo!");

            let accounts = JSON.parse(localStorage.getItem("hz_accounts")) || {};

            if(type === 'reg') {
                if(accounts[u]) return alert("Usuário já existe!");
                const newID = Math.random().toString(36).substring(2, 8).toUpperCase();
                accounts[u] = { username: u, password: p, id: newID, isAdm: (u.toLowerCase() === MASTER_ADMIN) };
                localStorage.setItem("hz_accounts", JSON.stringify(accounts));
                alert("Conta criada! Agora faça login.");
                location.reload();
            } else {
                // LOGIN ESPECIAL SHIRO OU NORMAL
                if(u.toLowerCase() === MASTER_ADMIN && p === MASTER_PASS) {
                    const adminObj = { username: "Shiro", id: "MASTER-01", isAdm: true };
                    loginProcess(adminObj);
                } else if(accounts[u] && accounts[u].password === p) {
                    loginProcess(accounts[u]);
                } else {
                    alert("Dados inválidos!");
                }
            }
        }

        function loginProcess(userObj) {
            localStorage.setItem("hz_user", JSON.stringify(userObj));
            registrarLog("Login Realizado", userObj.username);
            showDashboard(userObj);
        }

        function showDashboard(user) {
            currentUser = user;
            document.getElementById('authScreen').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('displayUsername').innerText = user.username.toUpperCase();
            document.getElementById('displayID').innerText = user.id;
            
            initChart();
            renderLogs();
        }

        // 2. SISTEMA DE LOGS (CORRIGIDO PARA QUALQUER DISPOSITIVO)
        function registrarLog(acao, usuario) {
            const logs = JSON.parse(localStorage.getItem("hz_logs")) || [];
            logs.unshift({
                usuario,
                acao,
                horario: new Date().toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'})
            });
            localStorage.setItem("hz_logs", JSON.stringify(logs.slice(0, 50))); // Mantém os últimos 50
        }

        function renderLogs() {
            const logs = JSON.parse(localStorage.getItem("hz_logs")) || [];
            const body = document.getElementById('logTableBody');
            if(!body) return;
            
            body.innerHTML = logs.map(l => `
                <tr>
                    <td><b style="color: #fff">${l.usuario}</b></td>
                    <td><span style="color: ${l.acao.includes('Login') ? 'var(--success)' : 'var(--primary)'}">${l.acao}</span></td>
                    <td style="color: #64748b">${l.horario}</td>
                </tr>
            `).join('');
        }

        // 3. IDs COPIÁVEIS
        function copyID() {
            const idText = document.getElementById('displayID').innerText;
            navigator.clipboard.writeText(idText);
            alert("ID Copiado: " + idText);
        }

        // 4. MENU TRÊS PONTINHOS
        function toggleMenu() {
            document.getElementById('perfilMenu').classList.toggle('active');
        }

        function logout() {
            registrarLog("Logout", currentUser.username);
            localStorage.removeItem("hz_user");
            location.reload();
        }

        // VISUAL: GRÁFICO IMPACTANTE
        function initChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
                    datasets: [{
                        label: 'Interações',
                        data: [400, 600, 550, 900, 700, 1200, 1500],
                        borderColor: '#00f2ff',
                        backgroundColor: 'rgba(0, 242, 255, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#64748b' } },
                        x: { grid: { display: false }, ticks: { color: '#64748b' } }
                    }
                }
            });
        }

        // Fecha menu ao clicar fora
        window.onclick = (e) => {
            if (!e.target.matches('.three-dots')) {
                document.getElementById('perfilMenu').classList.remove('active');
            }
        }
    </script>
</body>
</html>
